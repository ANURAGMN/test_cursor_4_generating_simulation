<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#2196f3">
<title>Convection - Interactive</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #2196f3 0%, #64b5f6 100%);
  min-height: 100vh;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

#app {
  max-width: 420px;
  margin: auto;
  padding: 10px;
}

.header {
  text-align: center;
  color: #fff;
  padding: 12px;
}

.header h1 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
.header p { font-size: 12px; opacity: 0.95; }

.concept-card {
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 10px;
  border-left: 4px solid #2196f3;
}

.concept-title { font-size: 12px; font-weight: 700; color: #1565c0; margin-bottom: 6px; }
.concept-text { font-size: 12px; color: #37474f; line-height: 1.5; }

.sim-card {
  background: #fff;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  margin-bottom: 10px;
}

.mode-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.mode-tab {
  flex: 1;
  padding: 10px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  background: #fafafa;
  font-size: 11px;
  font-weight: 600;
  text-align: center;
  cursor: pointer;
}

.mode-tab:active { transform: scale(0.98); }
.mode-tab.active { border-color: #2196f3; background: #e3f2fd; color: #1565c0; }

.mode-tab .emoji { font-size: 20px; display: block; margin-bottom: 4px; }

.controls {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.control-btn {
  flex: 1;
  padding: 10px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  background: #fafafa;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.control-btn:active { transform: scale(0.98); }
.control-btn.active { border-color: #2196f3; background: #e3f2fd; color: #1565c0; }

.temp-control {
  margin-bottom: 12px;
}

.temp-control label {
  font-size: 11px;
  font-weight: 600;
  color: #37474f;
  display: block;
  margin-bottom: 6px;
}

.temp-control input[type="range"] {
  width: 100%;
  height: 10px;
  border-radius: 5px;
  background: linear-gradient(90deg, #64b5f6, #ff9800, #f44336);
  outline: none;
  -webkit-appearance: none;
}

.temp-control input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #fff;
  border: 3px solid #2196f3;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.temp-value {
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  color: #1565c0;
  margin-top: 5px;
}

.convection-visual {
  position: relative;
  height: 280px;
  background: linear-gradient(180deg, #fafafa 0%, #e0e0e0 100%);
  border-radius: 10px;
  overflow: hidden;
}

/* Water beaker */
.beaker {
  position: absolute;
  bottom: 60px;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 160px;
  border: 5px solid #90caf9;
  border-top: none;
  border-radius: 0 0 25px 25px;
  background: linear-gradient(180deg, rgba(100,181,246,0.2) 0%, rgba(33,150,243,0.4) 100%);
  overflow: hidden;
}

.water-particle {
  position: absolute;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  font-size: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
}

.water-particle:hover { transform: scale(1.3); }

.water-particle.hot {
  background: radial-gradient(circle, #f44336, #c62828);
  box-shadow: 0 0 10px #f44336;
}

.water-particle.warm {
  background: radial-gradient(circle, #ff9800, #e65100);
}

.water-particle.cool {
  background: radial-gradient(circle, #2196f3, #1565c0);
}

.water-particle.cold {
  background: radial-gradient(circle, #64b5f6, #1976d2);
}

/* Animation paths */
.particle-animated {
  animation-duration: 4s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
}

.rise-path {
  animation-name: risePath;
}

.fall-path {
  animation-name: fallPath;
}

@keyframes risePath {
  0% { transform: translate(0, 0); }
  25% { transform: translate(20px, -60px); }
  50% { transform: translate(60px, -100px); }
  75% { transform: translate(80px, -60px); }
  100% { transform: translate(0, 0); }
}

@keyframes fallPath {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-20px, 40px); }
  50% { transform: translate(-60px, 80px); }
  75% { transform: translate(-80px, 40px); }
  100% { transform: translate(0, 0); }
}

/* Flame */
.flame-container {
  position: absolute;
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
}

.flame {
  font-size: 35px;
  animation: flameFlicker 0.5s ease-in-out infinite alternate;
}

.flame.off { opacity: 0.3; animation: none; }

@keyframes flameFlicker {
  0% { transform: scale(1); }
  100% { transform: scale(1.1); }
}

.flame-label {
  font-size: 10px;
  color: #e65100;
  font-weight: 600;
}

/* Arrows showing convection current */
.current-arrows {
  position: absolute;
  pointer-events: none;
}

.current-arrow {
  position: absolute;
  font-size: 24px;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.current-arrow.show {
  opacity: 1;
  animation: arrowPulse 1s ease-in-out infinite;
}

@keyframes arrowPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

.arrow-up { color: #f44336; }
.arrow-down { color: #2196f3; }

/* Info panel */
.info-panel {
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  background: rgba(255,255,255,0.95);
  padding: 10px;
  border-radius: 8px;
  font-size: 11px;
  color: #333;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  transition: opacity 0.3s ease;
}

.info-panel.hidden { opacity: 0; pointer-events: none; }

/* Air mode elements */
.room-visual {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  width: 240px;
  height: 180px;
  border: 4px solid #795548;
  background: linear-gradient(180deg, #ffccbc 0%, #ffab91 100%);
  border-radius: 5px;
  display: none;
}

.heater {
  position: absolute;
  bottom: 10px;
  left: 20px;
  font-size: 35px;
}

.heater.off { opacity: 0.3; }

.air-particle {
  position: absolute;
  font-size: 20px;
  opacity: 0.8;
}

.air-rising {
  animation: airRise 5s ease-in-out infinite;
}

.air-falling {
  animation: airFall 5s ease-in-out infinite;
}

@keyframes airRise {
  0% { transform: translate(0, 0); opacity: 1; }
  50% { transform: translate(80px, -100px); opacity: 0.6; }
  100% { transform: translate(160px, 0); opacity: 1; }
}

@keyframes airFall {
  0% { transform: translate(0, 0); opacity: 0.6; }
  50% { transform: translate(-40px, 60px); opacity: 1; }
  100% { transform: translate(0, 0); opacity: 0.6; }
}

.explanation {
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  border-radius: 10px;
  padding: 12px;
  margin-top: 10px;
  border-left: 4px solid #ff9800;
}

.explanation-title { font-size: 12px; font-weight: 700; color: #e65100; margin-bottom: 8px; }
.explanation-text { font-size: 11px; color: #37474f; line-height: 1.6; }

.takeaway {
  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
  border-radius: 10px;
  padding: 12px;
  margin-top: 10px;
  border-left: 4px solid #4caf50;
}

.takeaway-title { font-size: 12px; font-weight: 700; color: #2e7d32; margin-bottom: 6px; }
.takeaway-text { font-size: 11px; color: #37474f; line-height: 1.5; }

.hidden { display: none !important; }
</style>
</head>

<body>
<div id="app">

<div class="header">
  <h1>üåä Convection Currents</h1>
  <p>Interactive - control the heat and watch particles move!</p>
</div>

<div class="concept-card">
  <div class="concept-title">üìö Key Concept</div>
  <div class="concept-text">
    <strong>Convection</strong> transfers heat by fluid movement. Hot fluid rises (less dense), cold fluid sinks (more dense). Tap particles to track them!
  </div>
</div>

<div class="sim-card">
  <div class="mode-tabs">
    <button class="mode-tab active" onclick="selectMode('water', this)">
      <span class="emoji">üíß</span>
      Water
    </button>
    <button class="mode-tab" onclick="selectMode('air', this)">
      <span class="emoji">üí®</span>
      Air
    </button>
  </div>
  
  <div class="controls">
    <button class="control-btn" id="heat-btn" onclick="toggleHeat()">
      <span id="heat-icon">üî•</span>
      <span id="heat-text">Turn On Heat</span>
    </button>
    <button class="control-btn" onclick="toggleArrows()">
      <span>üîÑ</span>
      Show Current
    </button>
  </div>
  
  <div class="temp-control" id="temp-control">
    <label>üå°Ô∏è Temperature Control:</label>
    <input type="range" id="temp-slider" min="0" max="100" value="0" oninput="adjustTemp(this.value)">
    <div class="temp-value" id="temp-value">Cold (0¬∞C)</div>
  </div>
  
  <div class="convection-visual" id="convection-visual">
    <div class="info-panel" id="info-panel">
      üëÜ Turn on heat and watch the convection current form!
    </div>
    
    <!-- Water mode -->
    <div id="water-mode">
      <div class="beaker">
        <div class="water-particle cool" id="wp1" style="bottom: 20px; left: 30px;" onclick="trackParticle(this)">1</div>
        <div class="water-particle cool" id="wp2" style="bottom: 20px; left: 80px;" onclick="trackParticle(this)">2</div>
        <div class="water-particle cool" id="wp3" style="bottom: 20px; left: 130px;" onclick="trackParticle(this)">3</div>
        <div class="water-particle cold" id="wp4" style="top: 20px; left: 40px;" onclick="trackParticle(this)">4</div>
        <div class="water-particle cold" id="wp5" style="top: 20px; left: 100px;" onclick="trackParticle(this)">5</div>
        <div class="water-particle cold" id="wp6" style="top: 50px; left: 150px;" onclick="trackParticle(this)">6</div>
        
        <!-- Current arrows -->
        <div class="current-arrows">
          <div class="current-arrow arrow-up" style="bottom: 60px; left: 20px;">‚¨ÜÔ∏è</div>
          <div class="current-arrow arrow-up" style="bottom: 90px; left: 40px;">‚¨ÜÔ∏è</div>
          <div class="current-arrow arrow-down" style="top: 40px; right: 20px;">‚¨áÔ∏è</div>
          <div class="current-arrow arrow-down" style="top: 70px; right: 40px;">‚¨áÔ∏è</div>
        </div>
      </div>
      
      <div class="flame-container">
        <div class="flame off" id="water-flame">üî•</div>
        <div class="flame-label">Heat Source</div>
      </div>
    </div>
    
    <!-- Air mode -->
    <div id="air-mode" class="hidden">
      <div class="room-visual" style="display: block;">
        <div class="heater off" id="room-heater">üî•</div>
        <div class="air-particle" id="ap1" style="bottom: 50px; left: 60px;">üí®</div>
        <div class="air-particle" id="ap2" style="bottom: 60px; left: 40px;">üí®</div>
        <div class="air-particle" id="ap3" style="top: 30px; right: 40px;">üí®</div>
        <div class="air-particle" id="ap4" style="top: 50px; right: 60px;">üí®</div>
      </div>
    </div>
  </div>
</div>

<div class="explanation" id="explanation">
  <div class="explanation-title" id="exp-title">üî¨ How It Works</div>
  <div class="explanation-text" id="exp-text">
    Turn on the heat to see convection in action! Hot water at the bottom <strong>expands and becomes lighter</strong>, so it rises. Cooler water from the top <strong>sinks to replace it</strong>, creating a continuous circular flow.
  </div>
</div>

<div class="takeaway">
  <div class="takeaway-title">üéØ Remember</div>
  <div class="takeaway-text">
    ‚Ä¢ Convection happens in <strong>fluids</strong> (liquids & gases)<br>
    ‚Ä¢ Hot fluid <strong>rises</strong> (less dense)<br>
    ‚Ä¢ Cold fluid <strong>sinks</strong> (more dense)<br>
    ‚Ä¢ Creates <strong>convection currents</strong>
  </div>
</div>

</div>

<script>
let currentMode = 'water';
let isHeating = false;
let showingArrows = false;
let temperature = 0;

const waterMode = document.getElementById('water-mode');
const airMode = document.getElementById('air-mode');
const infoPanel = document.getElementById('info-panel');
const waterFlame = document.getElementById('water-flame');
const roomHeater = document.getElementById('room-heater');
const heatBtn = document.getElementById('heat-btn');
const tempSlider = document.getElementById('temp-slider');
const expTitle = document.getElementById('exp-title');
const expText = document.getElementById('exp-text');

const waterParticles = document.querySelectorAll('.water-particle');
const airParticles = document.querySelectorAll('.air-particle');
const currentArrows = document.querySelectorAll('.current-arrow');

function selectMode(mode, btn) {
  currentMode = mode;
  
  document.querySelectorAll('.mode-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  
  if (mode === 'water') {
    waterMode.classList.remove('hidden');
    airMode.classList.add('hidden');
    expText.innerHTML = 'Turn on the heat to see convection in action! Hot water at the bottom <strong>expands and becomes lighter</strong>, so it rises. Cooler water from the top <strong>sinks to replace it</strong>, creating a continuous circular flow.';
  } else {
    waterMode.classList.add('hidden');
    airMode.classList.remove('hidden');
    expText.innerHTML = 'A room heater warms the air nearby. <strong>Warm air rises</strong> toward the ceiling. Cooler air moves in to replace it. This circulation eventually <strong>warms the entire room</strong>!';
  }
  
  resetAnimation();
}

function toggleHeat() {
  isHeating = !isHeating;
  
  if (isHeating) {
    infoPanel.classList.add('hidden');
    heatBtn.classList.add('active');
    document.getElementById('heat-icon').textContent = '‚ùÑÔ∏è';
    document.getElementById('heat-text').textContent = 'Turn Off Heat';
    
    waterFlame.classList.remove('off');
    roomHeater.classList.remove('off');
    
    // Start animations
    startConvection();
    
    // Animate temperature slider
    animateTemperature();
  } else {
    heatBtn.classList.remove('active');
    document.getElementById('heat-icon').textContent = 'üî•';
    document.getElementById('heat-text').textContent = 'Turn On Heat';
    
    waterFlame.classList.add('off');
    roomHeater.classList.add('off');
    
    stopConvection();
    temperature = 0;
    tempSlider.value = 0;
    updateTempDisplay(0);
  }
}

function startConvection() {
  if (currentMode === 'water') {
    // Animate water particles
    document.getElementById('wp1').classList.add('particle-animated', 'rise-path');
    document.getElementById('wp2').classList.add('particle-animated', 'rise-path');
    document.getElementById('wp3').classList.add('particle-animated', 'rise-path');
    document.getElementById('wp4').classList.add('particle-animated', 'fall-path');
    document.getElementById('wp5').classList.add('particle-animated', 'fall-path');
    document.getElementById('wp6').classList.add('particle-animated', 'fall-path');
    
    // Change colors
    setTimeout(() => {
      document.getElementById('wp1').classList.remove('cool'); document.getElementById('wp1').classList.add('hot');
      document.getElementById('wp2').classList.remove('cool'); document.getElementById('wp2').classList.add('hot');
      document.getElementById('wp3').classList.remove('cool'); document.getElementById('wp3').classList.add('warm');
    }, 500);
  } else {
    // Animate air particles
    document.getElementById('ap1').classList.add('air-rising');
    document.getElementById('ap2').classList.add('air-rising');
    document.getElementById('ap3').classList.add('air-falling');
    document.getElementById('ap4').classList.add('air-falling');
  }
}

function stopConvection() {
  waterParticles.forEach(p => {
    p.classList.remove('particle-animated', 'rise-path', 'fall-path', 'hot', 'warm');
    p.classList.add('cool');
  });
  
  airParticles.forEach(p => {
    p.classList.remove('air-rising', 'air-falling');
  });
}

function toggleArrows() {
  showingArrows = !showingArrows;
  currentArrows.forEach(a => {
    if (showingArrows && isHeating) {
      a.classList.add('show');
    } else {
      a.classList.remove('show');
    }
  });
}

function animateTemperature() {
  if (!isHeating) return;
  
  if (temperature < 100) {
    temperature += 2;
    tempSlider.value = temperature;
    updateTempDisplay(temperature);
    setTimeout(animateTemperature, 100);
  }
}

function adjustTemp(value) {
  temperature = parseInt(value);
  updateTempDisplay(temperature);
}

function updateTempDisplay(temp) {
  let label = 'Cold';
  if (temp > 75) label = 'Hot';
  else if (temp > 50) label = 'Warm';
  else if (temp > 25) label = 'Lukewarm';
  
  document.getElementById('temp-value').textContent = `${label} (${temp}¬∞C)`;
}

function trackParticle(el) {
  // Highlight the tracked particle
  waterParticles.forEach(p => p.style.border = 'none');
  el.style.border = '3px solid #ffeb3b';
  
  infoPanel.textContent = `Tracking Particle ${el.textContent}: ${el.classList.contains('hot') ? 'HOT - Rising!' : el.classList.contains('warm') ? 'WARM - Moving' : 'COOL - Sinking'}`;
  infoPanel.classList.remove('hidden');
}

function resetAnimation() {
  isHeating = false;
  temperature = 0;
  tempSlider.value = 0;
  updateTempDisplay(0);
  
  heatBtn.classList.remove('active');
  document.getElementById('heat-icon').textContent = 'üî•';
  document.getElementById('heat-text').textContent = 'Turn On Heat';
  
  waterFlame.classList.add('off');
  roomHeater.classList.add('off');
  
  stopConvection();
  infoPanel.textContent = 'üëÜ Turn on heat and watch the convection current form!';
  infoPanel.classList.remove('hidden');
}
</script>
</body>
</html>
