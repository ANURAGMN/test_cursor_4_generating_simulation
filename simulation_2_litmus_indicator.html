<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#11998e">
<title>Litmus Paper Test ‚Äì Acid-Base Indicator</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

html {
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  min-height: 100vh;
  min-height: -webkit-fill-available;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  -webkit-font-smoothing: antialiased;
}

#app {
  max-width: 420px;
  margin: auto;
  padding: 10px;
  padding-top: max(10px, env(safe-area-inset-top));
  padding-bottom: max(10px, env(safe-area-inset-bottom));
}

.header {
  text-align: center;
  color: #fff;
  padding: 12px;
  text-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.header h1 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
.header p { font-size: 12px; opacity: 0.95; }

.section-title {
  font-size: 13px;
  font-weight: 600;
  margin: 8px 4px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.sim-card {
  background: #fff;
  border-radius: 14px;
  padding: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  margin-bottom: 12px;
}

.visual {
  position: relative;
  height: 34vh;
  min-height: 260px;
  background: linear-gradient(145deg, #e8f5e9 0%, #c8e6c9 100%);
  border-radius: 12px;
  overflow: hidden;
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

svg { width: 100%; height: 100%; display: block; }

.static-hint {
  position: absolute;
  top: 8px;
  left: 8px;
  background: rgba(255,255,255,0.95);
  border-radius: 8px;
  padding: 6px 8px;
  font-size: 11px;
  line-height: 1.3;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  z-index: 10;
}

.metrics {
  background: #e8f5e9;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 11px;
  line-height: 1.6;
  margin-top: 8px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px 12px;
}

.metric-item { display: flex; justify-content: space-between; }
.metric-label { color: #666; }
.metric-value { font-weight: 600; color: #007AFF; }
.metric-value.acidic { color: #d32f2f; }
.metric-value.basic { color: #1565c0; }
.metric-value.neutral { color: #2e7d32; }

.control-panel {
  background: #e8f5e9;
  border-radius: 10px;
  padding: 10px;
  margin-top: 8px;
}

.control-label {
  font-size: 11px;
  font-weight: 600;
  color: #666;
  margin-bottom: 6px;
}

.solution-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
}

.solution-btn {
  padding: 8px 4px;
  border-radius: 8px;
  border: 2px solid #c8e6c9;
  font-size: 9px;
  background: #fff;
  cursor: pointer;
  text-align: center;
  line-height: 1.3;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  transition: transform 0.1s ease;
}

.solution-btn:active { transform: scale(0.95); }
.solution-btn.active { border-color: #11998e; background: #e8f5e9; }
.solution-btn .icon { font-size: 18px; display: block; margin-bottom: 2px; }

.test-btn {
  position: absolute;
  right: 8px;
  bottom: 8px;
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  color: white;
  font-size: 12px;
  font-weight: 600;
  padding: 10px 16px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(17,153,142,0.3);
  -webkit-tap-highlight-color: transparent;
  transition: transform 0.1s ease;
}

.test-btn:active { transform: scale(0.95); }

.legend {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 10px;
  background: #fff;
  border-radius: 10px;
  margin-top: 10px;
  font-size: 10px;
}

.legend-item { display: flex; align-items: center; gap: 4px; }
.legend-color { width: 20px; height: 12px; border-radius: 3px; }
.legend-color.blue { background: #2196f3; }
.legend-color.red { background: #f44336; }
.legend-color.no-change { background: #9e9e9e; }

.insight-box {
  background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
  font-size: 11px;
  line-height: 1.5;
  border-left: 4px solid #11998e;
}

.insight-title { font-weight: 600; color: #00695c; margin-bottom: 4px; }

.real-world {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
  font-size: 11px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.real-world .icon { font-size: 36px; }
.real-world .text { flex: 1; line-height: 1.4; }
.real-world .highlight-acid { color: #d32f2f; font-weight: 600; }
.real-world .highlight-base { color: #1565c0; font-weight: 600; }

.takeaway {
  background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
  border-radius: 10px;
  padding: 12px;
  margin-top: 10px;
  font-size: 12px;
  line-height: 1.5;
  display: none;
}

.takeaway.show { display: block; }
.takeaway-title { font-weight: 600; color: #1b5e20; margin-bottom: 4px; }

.prep-info {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
  font-size: 11px;
}

.prep-title { font-weight: 600; color: #00695c; margin-bottom: 6px; }

.prep-steps {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 4px;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}

.prep-steps::-webkit-scrollbar { display: none; }
.prep-step { flex-shrink: 0; text-align: center; width: 70px; }
.prep-step .icon { font-size: 22px; }
.prep-step .text { font-size: 9px; color: #666; }

/* SVG animation classes */
.litmus-paper {
  transition: transform 0.5s ease, fill 0.5s ease;
}

@media screen and (max-width: 380px) {
  .solution-grid { gap: 4px; }
  .solution-btn { padding: 6px 2px; font-size: 8px; }
  .solution-btn .icon { font-size: 16px; }
}

@supports (padding: max(0px)) {
  #app {
    padding-left: max(10px, env(safe-area-inset-left));
    padding-right: max(10px, env(safe-area-inset-right));
  }
}
</style>
</head>

<body>
<div id="app">

<div class="header">
  <h1>üß™ Litmus Paper Test</h1>
  <p>The classic indicator for acids and bases!</p>
</div>

<div class="section-title">Reference (Original litmus papers)</div>
<div class="sim-card" id="ref"></div>

<div class="section-title">Experiment (Test different solutions)</div>
<div class="sim-card" id="exp"></div>

<div class="legend">
  <div class="legend-item"><div class="legend-color blue"></div> Blue Litmus</div>
  <div class="legend-item"><div class="legend-color red"></div> Red Litmus</div>
  <div class="legend-item"><div class="legend-color no-change"></div> No Change</div>
</div>

<div class="insight-box">
  <div class="insight-title">üîë Key Insight:</div>
  <strong>Blue litmus ‚Üí Red</strong> indicates ACID. <strong>Red litmus ‚Üí Blue</strong> indicates BASE. If <strong>neither changes</strong>, the substance is NEUTRAL. This makes litmus a complete indicator!
</div>

<div class="real-world">
  <div class="icon">üåø</div>
  <div class="text">
    <strong>Where does litmus come from?</strong> Litmus is a natural dye extracted from <span class="highlight-base">lichens</span> (organisms that grow on rocks and trees). It's been used for centuries!
  </div>
</div>

<div class="prep-info">
  <div class="prep-title">üß™ How litmus paper works:</div>
  <div class="prep-steps">
    <div class="prep-step"><div class="icon">üåø</div><div class="text">Extract from lichens</div></div>
    <div class="prep-step"><div class="icon">üîµ</div><div class="text">Blue paper (natural)</div></div>
    <div class="prep-step"><div class="icon">üî¥</div><div class="text">Red paper (acid treated)</div></div>
    <div class="prep-step"><div class="icon">üíß</div><div class="text">Dip in solution</div></div>
    <div class="prep-step"><div class="icon">üëÄ</div><div class="text">Observe color</div></div>
  </div>
</div>

<div class="takeaway" id="takeaway">
  <div class="takeaway-title">üí° What you discovered:</div>
  Litmus is a <strong>complete indicator</strong> because it can identify all three types: <span style="color:#d32f2f;font-weight:600">ACIDIC</span> (blue‚Üíred), <span style="color:#1565c0;font-weight:600">BASIC</span> (red‚Üíblue), and <span style="color:#2e7d32;font-weight:600">NEUTRAL</span> (no change).
</div>

</div>

<script>
const SOLUTIONS = {
  'lemon': { name: 'Lemon Juice', icon: 'üçã', type: 'acidic', blueResult: '#f44336', redResult: '#f44336' },
  'vinegar': { name: 'Vinegar', icon: 'üç∂', type: 'acidic', blueResult: '#ef5350', redResult: '#ef5350' },
  'curd': { name: 'Curd/Yogurt', icon: 'ü•õ', type: 'acidic', blueResult: '#e57373', redResult: '#e57373' },
  'soap': { name: 'Soap Solution', icon: 'üßº', type: 'basic', blueResult: '#2196f3', redResult: '#2196f3' },
  'baking': { name: 'Baking Soda', icon: 'ü•Ñ', type: 'basic', blueResult: '#1976d2', redResult: '#1976d2' },
  'lime': { name: 'Lime Water', icon: 'üíß', type: 'basic', blueResult: '#1565c0', redResult: '#1565c0' },
  'water': { name: 'Tap Water', icon: 'üö∞', type: 'neutral', blueResult: '#2196f3', redResult: '#f44336' },
  'sugar': { name: 'Sugar Solution', icon: 'üç¨', type: 'neutral', blueResult: '#2196f3', redResult: '#f44336' },
  'salt': { name: 'Salt Solution', icon: 'üßÇ', type: 'neutral', blueResult: '#2196f3', redResult: '#f44336' }
};

function createSimulation(containerId, isExperiment) {
  const c = document.getElementById(containerId);
  const defaultSolution = isExperiment ? 'lemon' : 'water';
  
  c.innerHTML = `
  <div class="visual">
    <div class="static-hint">
      ${isExperiment ? 'üëÜ Select solution & tap "Dip"' : 'üìÑ Original litmus papers'}
    </div>

    <svg viewBox="0 0 400 300">
      <!-- Lab bench -->
      <rect x="30" y="210" width="340" height="70" rx="4" fill="#8d6e63"/>
      <rect x="30" y="210" width="340" height="8" rx="2" fill="#6d4c41"/>
      
      <!-- Beaker in center -->
      <g id="${containerId}-beaker" transform="translate(200, 90)">
        <path d="M-45,25 L-40,95 Q-40,105 -30,105 L30,105 Q40,105 40,95 L45,25 Z" 
              fill="rgba(255,255,255,0.4)" stroke="rgba(255,255,255,0.6)" stroke-width="2"/>
        <ellipse cx="0" cy="25" rx="45" ry="9" fill="rgba(255,255,255,0.3)"/>
        <rect x="-35" y="38" width="70" height="55" rx="2" fill="#81d4fa" id="${containerId}-liquid"/>
        <text x="0" y="125" text-anchor="middle" font-size="10" fill="#666" id="${containerId}-beaker-label">${isExperiment ? SOLUTIONS[defaultSolution].name : 'Empty'}</text>
        <text x="0" y="15" font-size="16" text-anchor="middle" id="${containerId}-beaker-icon">${isExperiment ? SOLUTIONS[defaultSolution].icon : ''}</text>
      </g>
      
      <!-- Blue Litmus Paper -->
      <rect class="litmus-paper" x="60" y="60" width="35" height="90" rx="3" fill="#2196f3" id="${containerId}-blue-paper" stroke="#1976d2" stroke-width="1"/>
      <text x="77" y="170" text-anchor="middle" font-size="9" fill="#1976d2" font-weight="600">Blue Litmus</text>
      <text x="77" y="185" text-anchor="middle" font-size="8" fill="#666" id="${containerId}-blue-status">Original</text>
      
      <!-- Red Litmus Paper -->
      <rect class="litmus-paper" x="305" y="60" width="35" height="90" rx="3" fill="#f44336" id="${containerId}-red-paper" stroke="#d32f2f" stroke-width="1"/>
      <text x="322" y="170" text-anchor="middle" font-size="9" fill="#d32f2f" font-weight="600">Red Litmus</text>
      <text x="322" y="185" text-anchor="middle" font-size="8" fill="#666" id="${containerId}-red-status">Original</text>
      
      <!-- Result indicator -->
      <g id="${containerId}-result" opacity="0">
        <rect x="140" y="195" width="120" height="28" rx="14" fill="#fff" stroke="#4caf50" stroke-width="2"/>
        <text x="200" y="214" text-anchor="middle" font-size="11" fill="#4caf50" font-weight="600" id="${containerId}-result-text">Result</text>
      </g>
    </svg>

    ${isExperiment ? '<button class="test-btn" id="test-action">üíß Dip Papers</button>' : ''}
  </div>

  <div class="metrics">
    <div class="metric-item"><span class="metric-label">Solution:</span> <span class="metric-value" id="${containerId}-solution-name">${isExperiment ? SOLUTIONS[defaultSolution].name : 'None'}</span></div>
    <div class="metric-item"><span class="metric-label">Blue Litmus:</span> <span class="metric-value" id="${containerId}-blue-result">Blue</span></div>
    <div class="metric-item"><span class="metric-label">Red Litmus:</span> <span class="metric-value" id="${containerId}-red-result">Red</span></div>
    <div class="metric-item"><span class="metric-label">Conclusion:</span> <span class="metric-value" id="${containerId}-conclusion">${isExperiment ? '?' : '‚Äî'}</span></div>
  </div>

  ${isExperiment ? `
  <div class="control-panel">
    <div class="control-label">Select a solution to test:</div>
    <div class="solution-grid">
      <button class="solution-btn active" data-solution="lemon"><span class="icon">üçã</span>Lemon</button>
      <button class="solution-btn" data-solution="vinegar"><span class="icon">üç∂</span>Vinegar</button>
      <button class="solution-btn" data-solution="curd"><span class="icon">ü•õ</span>Curd</button>
      <button class="solution-btn" data-solution="soap"><span class="icon">üßº</span>Soap</button>
      <button class="solution-btn" data-solution="baking"><span class="icon">ü•Ñ</span>Baking Soda</button>
      <button class="solution-btn" data-solution="lime"><span class="icon">üíß</span>Lime Water</button>
      <button class="solution-btn" data-solution="water"><span class="icon">üö∞</span>Tap Water</button>
      <button class="solution-btn" data-solution="sugar"><span class="icon">üç¨</span>Sugar</button>
      <button class="solution-btn" data-solution="salt"><span class="icon">üßÇ</span>Salt</button>
    </div>
  </div>
  ` : ''}`;

  if (!isExperiment) return;

  let state = { solution: 'lemon', tested: false, animating: false };

  const bluePaper = c.querySelector(`#${containerId}-blue-paper`);
  const redPaper = c.querySelector(`#${containerId}-red-paper`);
  const blueStatus = c.querySelector(`#${containerId}-blue-status`);
  const redStatus = c.querySelector(`#${containerId}-red-status`);
  const liquid = c.querySelector(`#${containerId}-liquid`);
  const beakerLabel = c.querySelector(`#${containerId}-beaker-label`);
  const beakerIcon = c.querySelector(`#${containerId}-beaker-icon`);
  const solutionName = c.querySelector(`#${containerId}-solution-name`);
  const blueResult = c.querySelector(`#${containerId}-blue-result`);
  const redResult = c.querySelector(`#${containerId}-red-result`);
  const conclusion = c.querySelector(`#${containerId}-conclusion`);
  const resultBox = c.querySelector(`#${containerId}-result`);
  const resultText = c.querySelector(`#${containerId}-result-text`);
  const testBtn = c.querySelector('#test-action');

  // Original positions
  const blueOrigX = 60, blueOrigY = 60;
  const redOrigX = 305, redOrigY = 60;
  // Dip positions (near beaker)
  const blueDipX = 130, blueDipY = 100;
  const redDipX = 235, redDipY = 100;

  function updateDisplay() {
    const sol = SOLUTIONS[state.solution];
    beakerLabel.textContent = sol.name;
    beakerIcon.textContent = sol.icon;
    solutionName.textContent = sol.name;
    
    // Change liquid color based on solution type
    if (sol.type === 'acidic') liquid.setAttribute('fill', '#ffcdd2');
    else if (sol.type === 'basic') liquid.setAttribute('fill', '#bbdefb');
    else liquid.setAttribute('fill', '#b3e5fc');
  }

  function animatePaper(paper, startX, startY, endX, endY, duration) {
    return new Promise(resolve => {
      const startTime = performance.now();
      
      function animate(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Ease in-out
        const eased = progress < 0.5 
          ? 2 * progress * progress 
          : 1 - Math.pow(-2 * progress + 2, 2) / 2;
        
        const currentX = startX + (endX - startX) * eased;
        const currentY = startY + (endY - startY) * eased;
        
        paper.setAttribute('x', currentX);
        paper.setAttribute('y', currentY);
        
        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          resolve();
        }
      }
      
      requestAnimationFrame(animate);
    });
  }

  async function runTest() {
    if (state.animating) return;
    state.animating = true;
    state.tested = true;
    
    const sol = SOLUTIONS[state.solution];
    
    // Move papers to beaker
    await Promise.all([
      animatePaper(bluePaper, blueOrigX, blueOrigY, blueDipX, blueDipY, 400),
      animatePaper(redPaper, redOrigX, redOrigY, redDipX, redDipY, 400)
    ]);
    
    // Wait a moment (dipping)
    await new Promise(r => setTimeout(r, 500));
    
    // Change colors based on solution
    bluePaper.setAttribute('fill', sol.blueResult);
    redPaper.setAttribute('fill', sol.redResult);
    
    // Wait a moment
    await new Promise(r => setTimeout(r, 300));
    
    // Move papers back
    await Promise.all([
      animatePaper(bluePaper, blueDipX, blueDipY, blueOrigX, blueOrigY, 400),
      animatePaper(redPaper, redDipX, redDipY, redOrigX, redOrigY, 400)
    ]);
    
    // Update status labels and metrics
    if (sol.type === 'acidic') {
      blueStatus.textContent = '‚Üí Red!';
      redStatus.textContent = 'No change';
      blueResult.textContent = 'Red ‚ö†Ô∏è';
      blueResult.className = 'metric-value acidic';
      redResult.textContent = 'Red';
      redResult.className = 'metric-value';
      conclusion.textContent = 'ACIDIC';
      conclusion.className = 'metric-value acidic';
      resultText.textContent = 'üî¥ ACIDIC';
      resultText.setAttribute('fill', '#d32f2f');
      resultBox.querySelector('rect').setAttribute('stroke', '#d32f2f');
    } else if (sol.type === 'basic') {
      blueStatus.textContent = 'No change';
      redStatus.textContent = '‚Üí Blue!';
      blueResult.textContent = 'Blue';
      blueResult.className = 'metric-value';
      redResult.textContent = 'Blue ‚ö†Ô∏è';
      redResult.className = 'metric-value basic';
      conclusion.textContent = 'BASIC';
      conclusion.className = 'metric-value basic';
      resultText.textContent = 'üîµ BASIC';
      resultText.setAttribute('fill', '#1565c0');
      resultBox.querySelector('rect').setAttribute('stroke', '#1565c0');
    } else {
      blueStatus.textContent = 'No change';
      redStatus.textContent = 'No change';
      blueResult.textContent = 'Blue';
      blueResult.className = 'metric-value';
      redResult.textContent = 'Red';
      redResult.className = 'metric-value';
      conclusion.textContent = 'NEUTRAL';
      conclusion.className = 'metric-value neutral';
      resultText.textContent = '‚ö™ NEUTRAL';
      resultText.setAttribute('fill', '#2e7d32');
      resultBox.querySelector('rect').setAttribute('stroke', '#2e7d32');
    }

    resultBox.setAttribute('opacity', '1');
    document.getElementById('takeaway').classList.add('show');
    state.animating = false;
  }

  function resetTest() {
    if (state.animating) return;
    state.tested = false;
    
    // Reset paper positions and colors
    bluePaper.setAttribute('x', blueOrigX);
    bluePaper.setAttribute('y', blueOrigY);
    bluePaper.setAttribute('fill', '#2196f3');
    
    redPaper.setAttribute('x', redOrigX);
    redPaper.setAttribute('y', redOrigY);
    redPaper.setAttribute('fill', '#f44336');
    
    blueStatus.textContent = 'Original';
    redStatus.textContent = 'Original';
    blueResult.textContent = 'Blue';
    blueResult.className = 'metric-value';
    redResult.textContent = 'Red';
    redResult.className = 'metric-value';
    conclusion.textContent = '?';
    conclusion.className = 'metric-value';
    resultBox.setAttribute('opacity', '0');
  }

  testBtn.onclick = runTest;

  c.querySelectorAll('.solution-btn').forEach(btn => {
    btn.onclick = () => {
      if (state.animating) return;
      c.querySelectorAll('.solution-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      state.solution = btn.dataset.solution;
      resetTest();
      updateDisplay();
    };
  });

  updateDisplay();
}

createSimulation('ref', false);
createSimulation('exp', true);
</script>
</body>
</html>
