<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#667eea">
<title>Hidden Message Revealed ‚Äì Science Fair Introduction</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

html {
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  min-height: -webkit-fill-available;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  -webkit-font-smoothing: antialiased;
}

#app {
  max-width: 420px;
  margin: auto;
  padding: 10px;
  padding-top: max(10px, env(safe-area-inset-top));
  padding-bottom: max(10px, env(safe-area-inset-bottom));
}

.header {
  text-align: center;
  color: #fff;
  padding: 12px;
  text-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.header h1 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
.header p { font-size: 12px; opacity: 0.95; }

.section-title {
  font-size: 13px;
  font-weight: 600;
  margin: 8px 4px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.sim-card {
  background: #fff;
  border-radius: 14px;
  padding: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  margin-bottom: 12px;
}

.visual {
  position: relative;
  height: 40vh;
  min-height: 300px;
  background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 70%, #228B22 100%);
  border-radius: 12px;
  overflow: hidden;
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

svg { width: 100%; height: 100%; display: block; }

.static-hint {
  position: absolute;
  top: 8px;
  left: 8px;
  background: rgba(255,255,255,0.95);
  border-radius: 8px;
  padding: 6px 8px;
  font-size: 11px;
  line-height: 1.3;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  z-index: 10;
}

.spray-counter {
  position: absolute;
  top: 8px;
  right: 8px;
  background: rgba(255,255,255,0.95);
  border-radius: 8px;
  padding: 6px 10px;
  font-size: 11px;
  font-weight: 600;
  color: #667eea;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
}

.metrics {
  background: #ede7f6;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 11px;
  line-height: 1.6;
  margin-top: 8px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px 12px;
}

.metric-item { display: flex; justify-content: space-between; }
.metric-label { color: #666; }
.metric-value { font-weight: 600; color: #007AFF; }
.metric-value.revealed { color: #e91e63; }

.test-btn {
  position: absolute;
  right: 8px;
  bottom: 8px;
  background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);
  color: white;
  font-size: 12px;
  font-weight: 600;
  padding: 10px 16px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(233,30,99,0.3);
  -webkit-tap-highlight-color: transparent;
  transition: transform 0.1s ease;
}

.test-btn:active { transform: scale(0.95); }
.test-btn:disabled { background: #ccc; }

.insight-box {
  background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
  font-size: 11px;
  line-height: 1.5;
  border-left: 4px solid #e91e63;
}

.insight-title { font-weight: 600; color: #c2185b; margin-bottom: 4px; }

.real-world {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
  font-size: 11px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.real-world .icon { font-size: 36px; }
.real-world .text { flex: 1; line-height: 1.4; }
.real-world .highlight { color: #e91e63; font-weight: 600; }

.takeaway {
  background: linear-gradient(135deg, #ede7f6 0%, #d1c4e9 100%);
  border-radius: 10px;
  padding: 12px;
  margin-top: 10px;
  font-size: 12px;
  line-height: 1.5;
  display: none;
}

.takeaway.show { display: block; }
.takeaway-title { font-weight: 600; color: #512da8; margin-bottom: 4px; }

.characters-info {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 15px;
}

.char-avatar {
  text-align: center;
}

.char-avatar .icon { font-size: 28px; }
.char-avatar .name { font-size: 9px; color: #666; }

.char-speech {
  flex: 1;
  font-size: 11px;
  color: #333;
  font-style: italic;
  background: #f5f5f5;
  padding: 8px 12px;
  border-radius: 10px;
  position: relative;
}

.char-speech::before {
  content: '';
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  border: 6px solid transparent;
  border-right-color: #f5f5f5;
}

@media screen and (max-width: 380px) {
  .visual { min-height: 280px; }
}

@supports (padding: max(0px)) {
  #app {
    padding-left: max(10px, env(safe-area-inset-left));
    padding-right: max(10px, env(safe-area-inset-right));
  }
}
</style>
</head>

<body>
<div id="app">

<div class="header">
  <h1>üî¨ Science Fair Mystery</h1>
  <p>Discover how indicators reveal hidden messages!</p>
</div>

<div class="section-title">Spray the indicator to reveal the message</div>
<div class="sim-card" id="sim"></div>

<div class="insight-box">
  <div class="insight-title">üîë What's happening here?</div>
  The message was written using a <strong>basic solution</strong> (invisible when dry). The spray contains an <strong>indicator</strong> that changes color when it contacts the base, revealing the hidden text!
</div>

<div class="characters-info">
  <div class="char-avatar">
    <div class="icon">üë¶</div>
    <div class="name">Ashwin</div>
  </div>
  <div class="char-avatar">
    <div class="icon">üëß</div>
    <div class="name">Keerthi</div>
  </div>
  <div class="char-speech">
    "How did the white paper suddenly show a message when they sprayed it? This must be chemistry!"
  </div>
</div>

<div class="real-world">
  <div class="icon">üïµÔ∏è</div>
  <div class="text">
    <strong>Secret messages:</strong> Spies used <span class="highlight">invisible ink</span> made from lemon juice (acid) or baking soda (base). The message appears when treated with the right indicator!
  </div>
</div>

<div class="takeaway" id="takeaway">
  <div class="takeaway-title">üí° What you discovered:</div>
  This simple demonstration shows the power of <strong>acid-base indicators</strong>. Throughout this chapter, you'll learn about different indicators like litmus, turmeric, and rose petals that can identify acidic, basic, and neutral substances!
</div>

</div>

<script>
const container = document.getElementById('sim');

container.innerHTML = `
<div class="visual">
  <div class="static-hint">
    üëÜ Tap "Spray" multiple times!
  </div>
  <div class="spray-counter">Sprays: <span id="spray-count">0</span>/3</div>

  <svg viewBox="0 0 400 320">
    <!-- Banner -->
    <g transform="translate(200, 30)">
      <rect x="-80" y="-15" width="160" height="30" rx="5" fill="#FFE4B5" stroke="#8B4513" stroke-width="2"/>
      <text x="0" y="6" text-anchor="middle" font-size="12" fill="#8B4513" font-weight="600">üé™ SCIENCE FAIR üé™</text>
    </g>
    
    <!-- White paper/board -->
    <g transform="translate(200, 130)">
      <rect x="-100" y="-60" width="200" height="120" rx="4" fill="#FFFEF0" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
      
      <!-- Hidden message (initially invisible) -->
      <g id="hidden-message" opacity="0">
        <text x="0" y="-20" text-anchor="middle" font-size="16" fill="#e91e63" font-weight="600">Welcome to</text>
        <text x="0" y="10" text-anchor="middle" font-size="20" fill="#e91e63" font-weight="700">Science Fair!</text>
        <text x="0" y="40" text-anchor="middle" font-size="12" fill="#e91e63">‚ú® Discover Chemistry ‚ú®</text>
      </g>
      
      <!-- Placeholder text -->
      <text id="placeholder" x="0" y="5" text-anchor="middle" font-size="11" fill="#ccc">Blank paper...</text>
    </g>
    
    <!-- Spray particles container -->
    <g id="spray-particles"></g>
    
    <!-- Spray bottle -->
    <g id="spray-bottle" transform="translate(320, 180)" style="cursor: pointer;">
      <rect x="-20" y="0" width="40" height="60" rx="8" fill="url(#bottleGradient)"/>
      <rect x="-12" y="-15" width="24" height="20" rx="4" fill="#333"/>
      <rect x="-8" y="-30" width="16" height="18" rx="3" fill="#444"/>
      <ellipse cx="0" cy="-30" rx="12" ry="6" fill="#555"/>
      <text x="0" y="80" text-anchor="middle" font-size="9" fill="#666">Indicator Spray</text>
    </g>
    
    <!-- Characters -->
    <g transform="translate(60, 220)">
      <circle cx="0" cy="0" r="20" fill="#FFB74D"/>
      <rect x="-15" y="20" width="30" height="40" rx="5" fill="#42A5F5"/>
      <text x="0" y="-30" text-anchor="middle" font-size="8" fill="#666">Ashwin</text>
    </g>
    
    <g transform="translate(340, 220)">
      <circle cx="0" cy="0" r="20" fill="#FFB74D"/>
      <rect x="-15" y="20" width="30" height="40" rx="5" fill="#EC407A"/>
      <text x="0" y="-30" text-anchor="middle" font-size="8" fill="#666">Keerthi</text>
    </g>
    
    <!-- Ground -->
    <rect x="0" y="280" width="400" height="40" fill="#228B22"/>
    
    <!-- Definitions -->
    <defs>
      <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.2"/>
      </filter>
      <linearGradient id="bottleGradient" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:#4FC3F7"/>
        <stop offset="50%" style="stop-color:#29B6F6"/>
        <stop offset="100%" style="stop-color:#4FC3F7"/>
      </linearGradient>
    </defs>
  </svg>

  <button class="test-btn" id="spray-btn">üß¥ Spray!</button>
</div>

<div class="metrics">
  <div class="metric-item"><span class="metric-label">Paper Status:</span> <span class="metric-value" id="paper-status">Blank</span></div>
  <div class="metric-item"><span class="metric-label">Indicator:</span> <span class="metric-value">Phenolphthalein</span></div>
  <div class="metric-item"><span class="metric-label">Hidden Ink:</span> <span class="metric-value">Basic solution</span></div>
  <div class="metric-item"><span class="metric-label">Message:</span> <span class="metric-value" id="message-status">Hidden</span></div>
</div>`;

let sprayCount = 0;
const maxSprays = 3;

const sprayBtn = document.getElementById('spray-btn');
const sprayCountDisplay = document.getElementById('spray-count');
const hiddenMessage = document.getElementById('hidden-message');
const placeholder = document.getElementById('placeholder');
const sprayParticles = document.getElementById('spray-particles');
const paperStatus = document.getElementById('paper-status');
const messageStatus = document.getElementById('message-status');
const takeaway = document.getElementById('takeaway');

function createSprayParticles() {
  // Clear old particles
  sprayParticles.innerHTML = '';
  
  // Create new particles
  for (let i = 0; i < 12; i++) {
    const particle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    const startX = 280 + Math.random() * 40;
    const startY = 160 + Math.random() * 30;
    const endX = 100 + Math.random() * 200;
    const endY = 80 + Math.random() * 100;
    
    particle.setAttribute('cx', startX);
    particle.setAttribute('cy', startY);
    particle.setAttribute('r', 3 + Math.random() * 3);
    particle.setAttribute('fill', '#e91e63');
    particle.setAttribute('opacity', '0.8');
    
    sprayParticles.appendChild(particle);
    
    // Animate particle
    particle.animate([
      { cx: startX, cy: startY, opacity: 0.8, r: particle.getAttribute('r') },
      { cx: endX, cy: endY, opacity: 0, r: 1 }
    ], {
      duration: 600,
      easing: 'ease-out',
      fill: 'forwards'
    });
  }
}

sprayBtn.onclick = function() {
  if (sprayCount >= maxSprays) return;
  
  sprayCount++;
  sprayCountDisplay.textContent = sprayCount;
  
  createSprayParticles();
  
  // Gradually reveal message
  const opacity = sprayCount / maxSprays;
  hiddenMessage.style.transition = 'opacity 0.5s ease';
  hiddenMessage.style.opacity = opacity;
  
  if (sprayCount === 1) {
    paperStatus.textContent = 'Reacting...';
    placeholder.style.opacity = '0.5';
  }
  
  if (sprayCount === 2) {
    paperStatus.textContent = 'Revealing...';
    placeholder.style.opacity = '0';
  }
  
  if (sprayCount >= maxSprays) {
    paperStatus.textContent = 'Revealed!';
    paperStatus.className = 'metric-value revealed';
    messageStatus.textContent = 'Visible!';
    messageStatus.className = 'metric-value revealed';
    sprayBtn.textContent = '‚ú® Message Revealed!';
    sprayBtn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)';
    takeaway.classList.add('show');
  }
};
</script>
</body>
</html>
