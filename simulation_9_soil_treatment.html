<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#134e5e">
<title>Soil Treatment ‚Äì Neutralisation in Agriculture</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

html {
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
  min-height: 100vh;
  min-height: -webkit-fill-available;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  -webkit-font-smoothing: antialiased;
}

#app {
  max-width: 420px;
  margin: auto;
  padding: 10px;
  padding-top: max(10px, env(safe-area-inset-top));
  padding-bottom: max(10px, env(safe-area-inset-bottom));
}

.header {
  text-align: center;
  color: #fff;
  padding: 12px;
  text-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.header h1 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
.header p { font-size: 12px; opacity: 0.95; }

.section-title {
  font-size: 13px;
  font-weight: 600;
  margin: 8px 4px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.sim-card {
  background: #fff;
  border-radius: 14px;
  padding: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  margin-bottom: 12px;
}

.visual {
  position: relative;
  height: 36vh;
  min-height: 260px;
  background: linear-gradient(180deg, #87CEEB 0%, #87CEEB 50%, transparent 50%);
  border-radius: 12px;
  overflow: hidden;
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

svg { width: 100%; height: 100%; display: block; }

.static-hint {
  position: absolute;
  top: 8px;
  left: 8px;
  background: rgba(255,255,255,0.95);
  border-radius: 8px;
  padding: 6px 8px;
  font-size: 11px;
  line-height: 1.3;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  z-index: 10;
}

.soil-indicator {
  position: absolute;
  top: 8px;
  right: 8px;
  background: rgba(255,255,255,0.95);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 11px;
  font-weight: 600;
  box-shadow: 0 3px 8px rgba(0,0,0,0.12);
  transition: all 0.3s ease;
}

.soil-indicator.acidic { background: #fff3e0; color: #e65100; }
.soil-indicator.basic { background: #e3f2fd; color: #1565c0; }
.soil-indicator.neutral { background: #e8f5e9; color: #2e7d32; }

.metrics {
  background: #e8f5e9;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 11px;
  line-height: 1.6;
  margin-top: 8px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px 12px;
}

.metric-item { display: flex; justify-content: space-between; }
.metric-label { color: #666; }
.metric-value { font-weight: 600; color: #007AFF; }
.metric-value.acidic { color: #e65100; }
.metric-value.basic { color: #1565c0; }
.metric-value.neutral { color: #2e7d32; }

.soil-selector {
  background: #f5f5f5;
  border-radius: 10px;
  padding: 10px;
  margin-top: 8px;
}

.selector-label {
  font-size: 11px;
  font-weight: 600;
  color: #666;
  margin-bottom: 8px;
}

.soil-btns {
  display: flex;
  gap: 8px;
}

.soil-btn {
  flex: 1;
  padding: 12px 8px;
  border-radius: 10px;
  border: 2px solid #ddd;
  font-size: 11px;
  background: #fff;
  cursor: pointer;
  text-align: center;
  -webkit-tap-highlight-color: transparent;
  transition: all 0.2s ease;
}

.soil-btn:active { transform: scale(0.95); }
.soil-btn.acidic.active { border-color: #ff9800; background: #fff3e0; }
.soil-btn.basic.active { border-color: #2196f3; background: #e3f2fd; }
.soil-btn .icon { font-size: 20px; display: block; margin-bottom: 4px; }

.action-btn {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: none;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 10px;
  background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
  color: white;
  -webkit-tap-highlight-color: transparent;
  transition: transform 0.1s ease;
}

.action-btn:active { transform: scale(0.98); }
.action-btn:disabled { background: #ccc; }

.treatment-guide {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.guide-card {
  flex: 1;
  padding: 10px;
  border-radius: 10px;
  text-align: center;
  font-size: 10px;
}

.guide-card.acidic { background: #fff3e0; }
.guide-card.basic { background: #e3f2fd; }

.guide-icon { font-size: 24px; margin-bottom: 4px; }
.guide-title { font-weight: 600; margin-bottom: 4px; }
.guide-card.acidic .guide-title { color: #e65100; }
.guide-card.basic .guide-title { color: #1565c0; }
.guide-arrow { font-size: 14px; color: #666; }
.guide-treatment { color: #666; }

.ph-meter {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  margin-top: 10px;
}

.ph-bar {
  height: 16px;
  border-radius: 8px;
  background: linear-gradient(90deg, #f44336 0%, #ff9800 20%, #ffeb3b 35%, #4caf50 50%, #8bc34a 65%, #03a9f4 80%, #3f51b5 100%);
  position: relative;
  margin-bottom: 5px;
}

.ph-pointer {
  position: absolute;
  top: -4px;
  width: 4px;
  height: 24px;
  background: #333;
  border-radius: 2px;
  transition: left 0.8s ease;
}

.ph-labels {
  display: flex;
  justify-content: space-between;
  font-size: 9px;
  color: #666;
}

.takeaway {
  background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
  border-radius: 10px;
  padding: 12px;
  margin-top: 10px;
  font-size: 12px;
  line-height: 1.5;
  display: none;
}

.takeaway.show { display: block; }
.takeaway-title { font-weight: 600; color: #1b5e20; margin-bottom: 4px; }

@media screen and (max-width: 380px) {
  .soil-btn { padding: 10px 6px; font-size: 10px; }
  .guide-card { padding: 8px; font-size: 9px; }
}

@supports (padding: max(0px)) {
  #app {
    padding-left: max(10px, env(safe-area-inset-left));
    padding-right: max(10px, env(safe-area-inset-right));
  }
}
</style>
</head>

<body>
<div id="app">

<div class="header">
  <h1>üå± Soil Treatment</h1>
  <p>Balancing soil pH for healthy plants!</p>
</div>

<div class="section-title">Select soil type and apply treatment</div>
<div class="sim-card" id="sim"></div>

<div class="treatment-guide">
  <div class="guide-card acidic">
    <div class="guide-icon">üü†</div>
    <div class="guide-title">Acidic Soil</div>
    <div class="guide-arrow">‚Üì</div>
    <div class="guide-treatment">Add <strong>Lime</strong> (base)</div>
  </div>
  <div class="guide-card basic">
    <div class="guide-icon">üîµ</div>
    <div class="guide-title">Basic Soil</div>
    <div class="guide-arrow">‚Üì</div>
    <div class="guide-treatment">Add <strong>Compost</strong> (acids)</div>
  </div>
</div>

<div class="ph-meter">
  <div style="font-size:11px;font-weight:600;color:#666;margin-bottom:6px;">Soil pH Level</div>
  <div class="ph-bar">
    <div class="ph-pointer" id="ph-pointer" style="left: calc(50% - 2px);"></div>
  </div>
  <div class="ph-labels">
    <span>Acidic (pH 4)</span>
    <span>Neutral (pH 7)</span>
    <span>Basic (pH 10)</span>
  </div>
</div>

<div class="takeaway" id="takeaway">
  <div class="takeaway-title">üí° What you discovered:</div>
  <span id="takeaway-text">Farmers use neutralisation to adjust soil pH for better plant growth!</span>
</div>

</div>

<script>
const container = document.getElementById('sim');

container.innerHTML = `
<div class="visual">
  <div class="static-hint">
    üëÜ Select soil type below
  </div>
  <div class="soil-indicator" id="soil-display">Select soil type</div>

  <svg viewBox="0 0 400 280">
    <!-- Sun -->
    <text x="350" y="40" font-size="40">‚òÄÔ∏è</text>
    
    <!-- Clouds -->
    <text x="50" y="50" font-size="30">‚òÅÔ∏è</text>
    <text x="150" y="40" font-size="25">‚òÅÔ∏è</text>
    
    <!-- Plant -->
    <g id="plant" transform="translate(200, 100)">
      <text x="0" y="0" text-anchor="middle" font-size="50" id="plant-icon">üå±</text>
    </g>
    
    <!-- Soil layer -->
    <rect x="0" y="160" width="400" height="120" rx="0" id="soil-layer" fill="#6d4c41"/>
    
    <!-- Treatment items -->
    <g id="lime-bag" transform="translate(60, 180)" opacity="0.4">
      <rect x="-25" y="0" width="50" height="60" rx="5" fill="#eceff1" stroke="#b0bec5"/>
      <text x="0" y="25" text-anchor="middle" font-size="8" fill="#455a64" font-weight="600">LIME</text>
      <circle cx="0" cy="42" r="10" fill="#e0e0e0" stroke="#bdbdbd"/>
    </g>
    
    <g id="compost-bag" transform="translate(340, 180)" opacity="0.4">
      <rect x="-25" y="0" width="50" height="60" rx="5" fill="#795548" stroke="#5d4037"/>
      <text x="0" y="25" text-anchor="middle" font-size="8" fill="#fff" font-weight="600">COMPOST</text>
      <text x="0" y="45" text-anchor="middle" font-size="16">üçÇ</text>
    </g>
  </svg>
</div>

<div class="metrics">
  <div class="metric-item"><span class="metric-label">Soil Type:</span> <span class="metric-value" id="soil-type">Not selected</span></div>
  <div class="metric-item"><span class="metric-label">pH Level:</span> <span class="metric-value" id="ph-level">‚Äî</span></div>
  <div class="metric-item"><span class="metric-label">Treatment:</span> <span class="metric-value" id="treatment-type">‚Äî</span></div>
  <div class="metric-item"><span class="metric-label">Plant Health:</span> <span class="metric-value" id="plant-health">‚Äî</span></div>
</div>

<div class="soil-selector">
  <div class="selector-label">Select soil type to treat:</div>
  <div class="soil-btns">
    <button class="soil-btn acidic" data-type="acidic"><span class="icon">üü†</span>Acidic Soil</button>
    <button class="soil-btn basic" data-type="basic"><span class="icon">üîµ</span>Basic Soil</button>
  </div>
</div>

<button class="action-btn" id="treat-btn" disabled>üåø Apply Treatment</button>`;

let selectedSoil = null;
let isTreated = false;

const soilDisplay = document.getElementById('soil-display');
const soilLayer = document.getElementById('soil-layer');
const plantIcon = document.getElementById('plant-icon');
const limeBag = document.getElementById('lime-bag');
const compostBag = document.getElementById('compost-bag');
const soilTypeDisplay = document.getElementById('soil-type');
const phLevelDisplay = document.getElementById('ph-level');
const treatmentTypeDisplay = document.getElementById('treatment-type');
const plantHealthDisplay = document.getElementById('plant-health');
const phPointer = document.getElementById('ph-pointer');
const treatBtn = document.getElementById('treat-btn');
const takeaway = document.getElementById('takeaway');
const takeawayText = document.getElementById('takeaway-text');

container.querySelectorAll('.soil-btn').forEach(btn => {
  btn.onclick = () => {
    if (isTreated) return;
    
    container.querySelectorAll('.soil-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    selectedSoil = btn.dataset.type;
    
    if (selectedSoil === 'acidic') {
      soilLayer.style.transition = 'fill 0.5s ease';
      soilLayer.style.fill = '#8d6e63';
      plantIcon.textContent = 'ü•Ä';
      soilDisplay.textContent = 'üü† Acidic Soil (pH 4-5)';
      soilDisplay.className = 'soil-indicator acidic';
      soilTypeDisplay.textContent = 'Acidic';
      soilTypeDisplay.className = 'metric-value acidic';
      phLevelDisplay.textContent = 'pH 4-5';
      phLevelDisplay.className = 'metric-value acidic';
      treatmentTypeDisplay.textContent = 'Need Lime';
      plantHealthDisplay.textContent = 'Poor ü•Ä';
      plantHealthDisplay.className = 'metric-value acidic';
      phPointer.style.left = '15%';
      limeBag.style.opacity = '1';
      compostBag.style.opacity = '0.4';
      takeawayText.textContent = 'This acidic soil (low pH) prevents plants from absorbing nutrients. We need to add lime (a base) to neutralise the acid!';
    } else {
      soilLayer.style.fill = '#78909c';
      plantIcon.textContent = 'ü•Ä';
      soilDisplay.textContent = 'üîµ Basic Soil (pH 9-10)';
      soilDisplay.className = 'soil-indicator basic';
      soilTypeDisplay.textContent = 'Basic';
      soilTypeDisplay.className = 'metric-value basic';
      phLevelDisplay.textContent = 'pH 9-10';
      phLevelDisplay.className = 'metric-value basic';
      treatmentTypeDisplay.textContent = 'Need Compost';
      plantHealthDisplay.textContent = 'Poor ü•Ä';
      plantHealthDisplay.className = 'metric-value basic';
      phPointer.style.left = '85%';
      compostBag.style.opacity = '1';
      limeBag.style.opacity = '0.4';
      takeawayText.textContent = 'This basic soil (high pH) prevents plants from absorbing iron. We need to add organic compost which releases acids as it decomposes!';
    }
    
    treatBtn.disabled = false;
    takeaway.classList.add('show');
  };
});

treatBtn.onclick = function() {
  if (!selectedSoil || isTreated) return;
  isTreated = true;
  
  setTimeout(() => {
    soilLayer.style.fill = '#5d4037';
    plantIcon.textContent = 'üåø';
    soilDisplay.textContent = 'üü¢ Neutral Soil (pH 7)';
    soilDisplay.className = 'soil-indicator neutral';
    soilTypeDisplay.textContent = 'Neutral';
    soilTypeDisplay.className = 'metric-value neutral';
    phLevelDisplay.textContent = 'pH 7';
    phLevelDisplay.className = 'metric-value neutral';
    treatmentTypeDisplay.textContent = 'Success!';
    treatmentTypeDisplay.className = 'metric-value neutral';
    plantHealthDisplay.textContent = 'Healthy üåø';
    plantHealthDisplay.className = 'metric-value neutral';
    phPointer.style.left = 'calc(50% - 2px)';
    
    if (selectedSoil === 'acidic') {
      takeawayText.textContent = 'The lime (base) neutralised the acidic soil. Now the pH is balanced around 7, and plants can absorb nutrients properly! üåø';
    } else {
      takeawayText.textContent = 'The compost released acids that neutralised the basic soil. Now the pH is balanced, allowing plants to thrive! üåø';
    }
    
    treatBtn.textContent = '‚úÖ Treatment Complete!';
    treatBtn.disabled = true;
  }, 500);
};
</script>
</body>
</html>
